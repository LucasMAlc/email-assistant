<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Email Assistant</title>
</head>
<body>
    <h1>Upload de Email</h1>
    <form method="post" action="/process" enctype="multipart/form-data">
        <label>Upload de arquivo (.txt ou .pdf):</label><br>
        <input type="file" name="file"><br><br>
        <label>Ou insira o texto do email:</label><br>
        <textarea name="text" rows="6" cols="50"></textarea><br><br>
        <button type="submit">Processar</button>
    </form>


    {% if error %}
        <div style="color:darkred"><strong>Erro:</strong> {{ error }}</div>
    {% endif %}

    {% if content %}
    <h2>Conteúdo processado</h2>
    <pre style="background:#f6f8fa;padding:10px;border-radius:6px">{{ content }}</pre>

        {% if categoria %}
            <div style="margin-top:10px;">
                <strong>Categoria:</strong>
                {% if categoria == "Produtivo" %}
                    <span style="color:green">{{ categoria }}</span>
                {% else %}
                    <span style="color:gray">{{ categoria }}</span>
                {% endif %}
                &nbsp;|&nbsp;<strong>Confiança:</strong> {{ confianca }}
                &nbsp;|&nbsp;<strong>Fonte:</strong> {{ fonte }}
            </div>
            <div style="margin-top:10px;">
                <strong>Resposta sugerida:</strong>
                <div style="background:#fff;padding:8px;border-radius:6px;border:1px solid #e5e7eb;margin-top:6px;">
                    <pre style="white-space:pre-wrap;margin:0">{{ resposta }}</pre>
                </div>
            </div>
        {% endif %}
    {% endif %}

    <form method="post" action="/feedback">
        <input type="hidden" name="original_text" value="{{ content }}">
        <input type="hidden" name="predicted" value="{{ categoria }}">
        <label>Está correto?</label>
        <select name="correction">
            <option value="sim">Sim</option>
            <option value="nao">Não</option>
        </select>
        <label>Se não, escolha a correta:</label>
        <select name="new_category">
            <option value="">--Selecione--</option>
            <option value="Produtivo">Produtivo</option>
            <option value="Improdutivo">Improdutivo</option>
        </select>
        <button type="submit">Enviar feedback</button>
    </form>

</body>
</html>
